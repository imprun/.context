# EPIC-014: Agent ê´€ë¦¬

## ê°œìš”

| í•­ëª© | ë‚´ìš© |
|------|------|
| **Epic ID** | EPIC-014 |
| **ì œëª©** | Agent ê´€ë¦¬ |
| **ìš°ì„ ìˆœìœ„** | P0 |
| **ì˜ˆìƒ ê¸°ê°„** | 1ì£¼ |
| **ìƒíƒœ** | âœ… ì™„ë£Œ |
| **ì˜ì¡´ì„±** | EPIC-013 (Cluster ê´€ë¦¬) |
| **GitHub Issue** | [#7](https://github.com/imprun/imp-gateway/issues/7) |

## ëª©í‘œ

Operatorê°€ í´ëŸ¬ìŠ¤í„°ì— Agentë¥¼ ë“±ë¡í•˜ê³ , Agentì˜ ìƒíƒœë¥¼ ëª¨ë‹ˆí„°ë§í•  ìˆ˜ ìˆë‹¤.

## ë°°ê²½

AgentëŠ” Kubernetes í´ëŸ¬ìŠ¤í„° ë‚´ì—ì„œ ì‹¤í–‰ë˜ë©°, imprun-serverë¡œë¶€í„° ë°°í¬ ëª…ë ¹ì„ ë°›ì•„ Kong Gateway / Envoy Gateway ë¦¬ì†ŒìŠ¤ë¥¼ ê´€ë¦¬í•œë‹¤. AgentëŠ” JWT ê¸°ë°˜ìœ¼ë¡œ ì¸ì¦ë˜ë©°, ì£¼ê¸°ì ìœ¼ë¡œ heartbeatë¥¼ ì „ì†¡í•œë‹¤.

> **í•µì‹¬ íë¦„**: Operatorê°€ Agent ë“±ë¡ â†’ í† í° ë°œê¸‰ â†’ Agentê°€ í† í°ìœ¼ë¡œ ì„œë²„ ì—°ê²° â†’ ë°°í¬ ëª…ë ¹ ìˆ˜ì‹ /ì‹¤í–‰

---

## ë„ë©”ì¸ ëª¨ë¸

### Agent ë“±ë¡ íë¦„

```mermaid
sequenceDiagram
    autonumber
    actor Operator
    participant UI as Agent ë“±ë¡ í¼
    participant API as imprun-server
    participant Agent as Agent (K8s Pod)
    participant K8s as Kubernetes

    Operator->>UI: "Agent ë“±ë¡" í´ë¦­
    UI->>UI: ë“±ë¡ í¼ í‘œì‹œ
    Operator->>UI: Agent ì´ë¦„ ì…ë ¥
    UI->>API: POST /api/v1/operator/agents (name, cluster_id)
    API-->>UI: Agent ìƒì„± + Bootstrap Token
    UI-->>Operator: í† í° í‘œì‹œ (1íšŒë§Œ)

    Note over Operator: í† í° ë³µì‚¬

    Operator->>K8s: Agent ë°°í¬ (Helm/kubectl)
    Note over K8s: AGENT_TOKEN í™˜ê²½ë³€ìˆ˜ ì„¤ì •

    K8s->>Agent: Pod ì‹œì‘
    Agent->>API: POST /api/v1/agent/register (token)
    API-->>Agent: JWT Access Token

    loop Heartbeat (30ì´ˆ)
        Agent->>API: POST /api/v1/agent/heartbeat
        API-->>Agent: 200 OK
    end

    API-->>UI: Agent ìƒíƒœ: Active
```

### Agent ìƒíƒœ ê´€ë¦¬

```mermaid
stateDiagram-v2
    [*] --> Pending: ë“±ë¡ë¨ (í† í° ë°œê¸‰)
    Pending --> Active: Agent ì—°ê²°ë¨
    Active --> Inactive: Heartbeat íƒ€ì„ì•„ì›ƒ (5ë¶„)
    Inactive --> Active: Heartbeat ì¬ê°œ
    Active --> [*]: ì‚­ì œ
    Pending --> [*]: ì‚­ì œ

    note right of Pending
        - í† í° ë°œê¸‰ë¨
        - Agent ì—°ê²° ëŒ€ê¸° ì¤‘
    end note

    note right of Active
        - ì •ìƒ ë™ì‘ ì¤‘
        - ë°°í¬ ëª…ë ¹ ìˆ˜ì‹  ê°€ëŠ¥
    end note

    note right of Inactive
        - ì—°ê²° ëŠê¹€
        - ì¬ì—°ê²° ëŒ€ê¸°
    end note
```

### Agentì™€ ë‹¤ë¥¸ ì—”í‹°í‹° ê´€ê³„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                            Cluster                                   â”‚
â”‚                      (kr-prod-cluster)                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â–¼                       â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚     Agent 1     â”‚     â”‚     Agent 2     â”‚
            â”‚ (agent-prod-01) â”‚     â”‚ (agent-prod-02) â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚                       â”‚
                    â–¼                       â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚        Kong Gateway Resources           â”‚
            â”‚  - Services, Routes, Plugins            â”‚
            â”‚  - Upstreams, Consumers                 â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ì‚¬ìš©ì íë¦„

### Agent ë“±ë¡ ë° í† í° ë°œê¸‰

```mermaid
sequenceDiagram
    actor Operator
    participant List as Cluster ìƒì„¸
    participant Form as Agent ë“±ë¡ í¼
    participant Token as í† í° í‘œì‹œ ëª¨ë‹¬
    participant API as imprun-server

    Operator->>List: Cluster ìƒì„¸ í˜ì´ì§€
    Operator->>List: "Agent ë“±ë¡" í´ë¦­
    List->>Form: ë“±ë¡ í¼ ëª¨ë‹¬ í‘œì‹œ

    Operator->>Form: Agent ì´ë¦„ ì…ë ¥
    Form->>API: POST /api/v1/operator/agents
    API-->>Form: { agent_id, bootstrap_token }

    Form->>Token: í† í° í‘œì‹œ ëª¨ë‹¬
    Note over Token: âš ï¸ ì´ í† í°ì€ ë‹¤ì‹œ ë³¼ ìˆ˜ ì—†ìŠµë‹ˆë‹¤!

    Operator->>Token: "ë³µì‚¬" í´ë¦­
    Token-->>Operator: í´ë¦½ë³´ë“œì— ë³µì‚¬ë¨

    Operator->>Token: "ì™„ë£Œ" í´ë¦­
    Token->>List: Cluster ìƒì„¸ë¡œ ëŒì•„ê°
    Note over List: ìƒˆ Agent (Pending) í‘œì‹œ
```

---

## ë²”ìœ„

### í¬í•¨
- Agent ë“±ë¡ ë° í† í° ë°œê¸‰
- Agent ëª©ë¡ í‘œì‹œ (Cluster ìƒì„¸ ë‚´)
- Agent ìƒì„¸ í˜ì´ì§€
- Agent ìƒíƒœ ëª¨ë‹ˆí„°ë§ (Active/Inactive/Pending)
- Agent ì‚­ì œ
- í† í° ì¬ë°œê¸‰

### ì œì™¸
- Agent ìë™ ìŠ¤ì¼€ì¼ë§ (Post-MVP)
- Agent ë¡œê·¸ ì¡°íšŒ (Post-MVP)
- Agent ì„¤ì • ì›ê²© ë³€ê²½ (Post-MVP)

---

## ê¸°ìˆ  ìš”êµ¬ì‚¬í•­

### ë°±ì—”ë“œ API

```
GET    /api/v1/operator/clusters/:clusterId/agents  # í´ëŸ¬ìŠ¤í„°ì˜ Agent ëª©ë¡
POST   /api/v1/operator/agents                       # Agent ë“±ë¡ (í† í° ë°œê¸‰)
GET    /api/v1/operator/agents/:id                   # Agent ìƒì„¸
DELETE /api/v1/operator/agents/:id                   # Agent ì‚­ì œ
POST   /api/v1/operator/agents/:id/regenerate-token  # í† í° ì¬ë°œê¸‰
```

### ë°ì´í„° ëª¨ë¸

```typescript
type AgentStatus = 'pending' | 'active' | 'inactive';

interface Agent {
  id: string;
  cluster_id: string;
  operator_tenant_id: string;
  name: string;
  status: AgentStatus;
  version?: string;            // Agent ë²„ì „
  last_heartbeat?: string;     // ë§ˆì§€ë§‰ heartbeat ì‹œê°„
  ip_address?: string;         // Agent IP
  metadata?: Record<string, string>;
  created_at: string;
  updated_at: string;
}

interface AgentRegistration {
  agent_id: string;
  bootstrap_token: string;     // 1íšŒì„± í† í° (í™”ë©´ì—ë§Œ í‘œì‹œ)
}
```

### FSD êµ¬ì¡°

```
web/src/
â”œâ”€â”€ entities/agent/
â”‚   â”œâ”€â”€ index.ts
â”‚   â”œâ”€â”€ model/
â”‚   â”‚   â””â”€â”€ types.ts
â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â””â”€â”€ agent-api.ts
â”‚   â””â”€â”€ ui/
â”‚       â”œâ”€â”€ agent-status-badge.tsx
â”‚       â”œâ”€â”€ agent-card.tsx
â”‚       â””â”€â”€ agent-list-item.tsx
â”‚
â”œâ”€â”€ features/agent/
â”‚   â”œâ”€â”€ index.ts
â”‚   â”œâ”€â”€ register/
â”‚   â”‚   â””â”€â”€ ui/
â”‚   â”‚       â”œâ”€â”€ register-agent-dialog.tsx
â”‚   â”‚       â””â”€â”€ token-display-modal.tsx   # í† í° í‘œì‹œ (ë³µì‚¬ ê¸°ëŠ¥)
â”‚   â”œâ”€â”€ regenerate-token/
â”‚   â”‚   â””â”€â”€ ui/
â”‚   â”‚       â””â”€â”€ regenerate-token-dialog.tsx
â”‚   â””â”€â”€ delete/
â”‚       â””â”€â”€ ui/
â”‚           â””â”€â”€ delete-agent-dialog.tsx
â”‚
â”œâ”€â”€ pages/operator/
â”‚   â””â”€â”€ agent/                    # ğŸ†• Domain Layer
â”‚       â”œâ”€â”€ index.ts
â”‚       â””â”€â”€ agent-detail-page.tsx # Agent ìƒì„¸ í˜ì´ì§€
â”‚
â””â”€â”€ app/operator/
    â””â”€â”€ agents/
        â””â”€â”€ [id]/
            â””â”€â”€ page.tsx
```

---

## ìŠ¤í† ë¦¬ ë¶„í•´

| Story | ì œëª© | ì˜ˆìƒ | ìš°ì„ ìˆœìœ„ |
|-------|------|------|----------|
| 14.1 | Agent ì—”í‹°í‹° ë° API í›… êµ¬í˜„ | 0.5ì¼ | P0 |
| 14.2 | Agent ë“±ë¡ ë‹¤ì´ì–¼ë¡œê·¸ (í† í° ë°œê¸‰) | 1ì¼ | P0 |
| 14.3 | í† í° í‘œì‹œ ëª¨ë‹¬ (ì„¤ì¹˜ ìŠ¤í¬ë¦½íŠ¸ í¬í•¨) | 1ì¼ | P0 |
| 14.4 | Cluster ìƒì„¸ ë‚´ Agent ëª©ë¡ í‘œì‹œ | 1ì¼ | P0 |
| 14.5 | Agent ìƒì„¸ í˜ì´ì§€ | 1ì¼ | P0 |
| 14.6 | Agent ì‚­ì œ ê¸°ëŠ¥ | 0.5ì¼ | P0 |
| 14.7 | í† í° ì¬ë°œê¸‰ ê¸°ëŠ¥ | 0.5ì¼ | P1 |

---

## ìˆ˜ìš© ê¸°ì¤€

### ê¸°ëŠ¥ ìš”êµ¬ì‚¬í•­
- [ ] Cluster ìƒì„¸ì—ì„œ Agentë¥¼ ë“±ë¡í•  ìˆ˜ ìˆë‹¤
- [ ] Agent ë“±ë¡ ì‹œ Bootstrap Tokenì´ ë°œê¸‰ëœë‹¤
- [ ] í† í°ì€ í™”ë©´ì— 1íšŒë§Œ í‘œì‹œë˜ê³ , ë³µì‚¬í•  ìˆ˜ ìˆë‹¤
- [ ] Agent ëª©ë¡ì—ì„œ ìƒíƒœ(Active/Inactive/Pending)ë¥¼ í™•ì¸í•  ìˆ˜ ìˆë‹¤
- [ ] Agentë¥¼ ì‚­ì œí•  ìˆ˜ ìˆë‹¤
- [ ] í† í°ì„ ì¬ë°œê¸‰í•  ìˆ˜ ìˆë‹¤

### ë¹„ê¸°ëŠ¥ ìš”êµ¬ì‚¬í•­
- [ ] Agent ìƒíƒœê°€ ì‹¤ì‹œê°„ìœ¼ë¡œ ì—…ë°ì´íŠ¸ëœë‹¤
- [ ] í† í° ë³µì‚¬ ì‹œ ì„±ê³µ í”¼ë“œë°± í‘œì‹œ
- [ ] ì‚­ì œ ì „ í™•ì¸ ë‹¤ì´ì–¼ë¡œê·¸

---

## UI/UX ê°€ì´ë“œ

### Agent ë“±ë¡ ë‹¤ì´ì–¼ë¡œê·¸

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Agent ë“±ë¡                                                          [X]   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  í´ëŸ¬ìŠ¤í„°: kr-prod-cluster                                                  â”‚
â”‚                                                                             â”‚
â”‚  Agent ì´ë¦„ *                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ agent-prod-01                                                        â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  â“˜ í´ëŸ¬ìŠ¤í„° ë‚´ì—ì„œ ê³ ìœ í•œ ì´ë¦„ì´ì–´ì•¼ í•©ë‹ˆë‹¤                                â”‚
â”‚                                                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                   [ ì·¨ì†Œ ]  [ ë“±ë¡ ]       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### í† í° í‘œì‹œ ëª¨ë‹¬ (ì„¤ì¹˜ ìŠ¤í¬ë¦½íŠ¸ í¬í•¨)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ”‘ Agent í† í° ë°œê¸‰ ì™„ë£Œ                                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  âš ï¸  ì´ í† í°ì€ ë‹¤ì‹œ ë³¼ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ì§€ê¸ˆ ë³µì‚¬í•´ì£¼ì„¸ìš”!                       â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhZ2VudF9pZCI6ImFnZW50LXBy â”‚   â”‚
â”‚  â”‚ b2QtMDEiLCJjbHVzdGVyX2lkIjoia3ItcHJvZC1jbHVzdGVyIiwidGVuYW50X2lk  â”‚   â”‚
â”‚  â”‚ IjoiZGVmYXVsdCIsImlhdCI6MTcwNjAwMDAwMH0.xxxxxxxxxxxxxxxxxxxxx...   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â”‚                                              [ ğŸ“‹ í† í° ë³µì‚¬ ]               â”‚
â”‚                                                                             â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•   â”‚
â”‚                                                                             â”‚
â”‚  ì„¤ì¹˜ ë°©ë²• ì„ íƒ:                                                            â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                           â”‚
â”‚  â”‚â–£ Kubernetes â”‚ â”‚   Docker    â”‚ â”‚   Native    â”‚                           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                           â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ # Helmìœ¼ë¡œ ì„¤ì¹˜                                               [ë³µì‚¬] â”‚   â”‚
â”‚  â”‚ helm repo add impgateway https://charts.impgateway.io               â”‚   â”‚
â”‚  â”‚ helm repo update                                                     â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â”‚ helm install imp-agent impgateway/agent \                           â”‚   â”‚
â”‚  â”‚   --namespace impgateway-system \                                   â”‚   â”‚
â”‚  â”‚   --create-namespace \                                              â”‚   â”‚
â”‚  â”‚   --set agent.token="eyJhbGciOi..." \                              â”‚   â”‚
â”‚  â”‚   --set agent.serverUrl="https://api.impgateway.io"                â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              [ ì™„ë£Œ ]       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### Kubernetes ì„¤ì¹˜ (Helm)

```bash
# Helmìœ¼ë¡œ ì„¤ì¹˜
helm repo add impgateway https://charts.impgateway.io
helm repo update

helm install imp-agent impgateway/agent \
  --namespace impgateway-system \
  --create-namespace \
  --set agent.token="<YOUR_TOKEN>" \
  --set agent.serverUrl="https://api.impgateway.io"
```

#### Docker ì„¤ì¹˜

```bash
# Dockerë¡œ ì‹¤í–‰
docker run -d \
  --name imp-agent \
  --restart unless-stopped \
  -e AGENT_TOKEN="<YOUR_TOKEN>" \
  -e SERVER_URL="https://api.impgateway.io" \
  impgateway/agent:latest
```

#### Native ì„¤ì¹˜ (Binary)

```bash
# ë°”ì´ë„ˆë¦¬ ë‹¤ìš´ë¡œë“œ
curl -sSL https://get.impgateway.io/agent | sh

# í™˜ê²½ë³€ìˆ˜ ì„¤ì • í›„ ì‹¤í–‰
export AGENT_TOKEN="<YOUR_TOKEN>"
export SERVER_URL="https://api.impgateway.io"

# ì„œë¹„ìŠ¤ë¡œ ì‹¤í–‰
sudo systemctl enable imp-agent
sudo systemctl start imp-agent
```

### Cluster ìƒì„¸ ë‚´ Agent ëª©ë¡ ì„¹ì…˜

```
â”Œâ”€ ì—°ê²°ëœ Agents (3) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ [ Agent ë“±ë¡ ] â”€â”
â”‚                                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ â— agent-prod-01                                           Active   â”‚ â”‚
â”‚  â”‚   Version: 1.2.0 | IP: 10.0.1.15 | Last: 2 min ago                â”‚ â”‚
â”‚  â”‚                                                    [ìƒì„¸] [ì‚­ì œ]   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ â— agent-prod-02                                           Active   â”‚ â”‚
â”‚  â”‚   Version: 1.2.0 | IP: 10.0.1.16 | Last: 1 min ago                â”‚ â”‚
â”‚  â”‚                                                    [ìƒì„¸] [ì‚­ì œ]   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ â—‹ agent-prod-03                                          Pending   â”‚ â”‚
â”‚  â”‚   ë“±ë¡ë¨: 5 min ago | ì—°ê²° ëŒ€ê¸° ì¤‘...                              â”‚ â”‚
â”‚  â”‚                                           [í† í° ì¬ë°œê¸‰] [ì‚­ì œ]     â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Agent ìƒì„¸ í˜ì´ì§€

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â† Cluster     agent-prod-01                                                â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  ğŸ¤–                                                                  â”‚    â”‚
â”‚  â”‚  agent-prod-01                                                      â”‚    â”‚
â”‚  â”‚                                                                      â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   Cluster: kr-prod-cluster                        â”‚    â”‚
â”‚  â”‚  â”‚  â— Active   â”‚   IP: 10.0.1.15                                   â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   Version: 1.2.0                                  â”‚    â”‚
â”‚  â”‚                    Last Heartbeat: 2 min ago                       â”‚    â”‚
â”‚  â”‚                                                                      â”‚    â”‚
â”‚  â”‚                       [ í† í° ì¬ë°œê¸‰ ]  [ ì‚­ì œ ]                     â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                             â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•   â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€ ìƒì„¸ ì •ë³´ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                                                                       â”‚   â”‚
â”‚  â”‚  Agent ID: agent-prod-01-xxxx-xxxx                                   â”‚   â”‚
â”‚  â”‚  ìƒì„±ì¼: 2025-01-15 10:30:00                                         â”‚   â”‚
â”‚  â”‚  ìµœì´ˆ ì—°ê²°: 2025-01-15 10:32:15                                      â”‚   â”‚
â”‚  â”‚                                                                       â”‚   â”‚
â”‚  â”‚  ë©”íƒ€ë°ì´í„°:                                                          â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
â”‚  â”‚  â”‚ node: worker-1 | namespace: impgateway-system                  â”‚  â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚
â”‚  â”‚                                                                       â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€ Heartbeat ì´ë ¥ (ìµœê·¼ 10ê±´) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                                                                       â”‚   â”‚
â”‚  â”‚  â— 2025-01-20 14:30:00  Success                                      â”‚   â”‚
â”‚  â”‚  â— 2025-01-20 14:29:30  Success                                      â”‚   â”‚
â”‚  â”‚  â— 2025-01-20 14:29:00  Success                                      â”‚   â”‚
â”‚  â”‚  â— 2025-01-20 14:28:30  Success                                      â”‚   â”‚
â”‚  â”‚  â— 2025-01-20 14:28:00  Success                                      â”‚   â”‚
â”‚  â”‚  ...                                                                  â”‚   â”‚
â”‚  â”‚                                                                       â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ì°¸ì¡°

### íŒ¨í„´ ì°¸ì¡° íŒŒì¼
- `web/src/features/agent/register/` - ê¸°ì¡´ Agent ë“±ë¡ íŒ¨í„´
- `web/src/entities/cluster/` - ì—”í‹°í‹° êµ¬ì¡°

### ë°±ì—”ë“œ API
- `services/imprun-server/internal/api/v1/operator/agents.go`
- `services/imprun-server/internal/api/v1/agent/` - Agent ì¸ì¦ API

---

## ë³€ê²½ ì´ë ¥

| ë‚ ì§œ | ë²„ì „ | ë³€ê²½ ë‚´ìš© | ì‘ì„±ì |
|------|------|----------|--------|
| 2025-11-27 | 1.0 | ì´ˆê¸° ì‘ì„± - Operator í¬í„¸ Agent ê´€ë¦¬ EPIC | Claude |
| 2025-11-27 | 1.1 | Story 14.3ì— K8s/Docker/Native ì„¤ì¹˜ ìŠ¤í¬ë¦½íŠ¸ ì¶”ê°€ | Claude |
| 2025-11-27 | 1.2 | ì‹œí€€ìŠ¤ ë‹¤ì´ì–´ê·¸ë¨ API ê²½ë¡œë¥¼ /api/v1/ í˜•ì‹ìœ¼ë¡œ í†µì¼ | Claude |
