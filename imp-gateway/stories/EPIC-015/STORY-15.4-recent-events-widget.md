# STORY-15.4: Recent Events Widget

## 1. ê°œìš”
**Epic**: EPIC-015 Fleet Dashboard
**ì œëª©**: ìµœê·¼ ì´ë²¤íŠ¸ ìœ„ì ¯
**ë‹´ë‹¹ì**: AI Agent
**ìƒíƒœ**: âœ… ì™„ë£Œ

## 2. ëª©ì 
ìµœê·¼ ë°œìƒí•œ Agent ì´ë²¤íŠ¸(ì—°ê²°/í•´ì œ/ë“±ë¡ ë“±)ë¥¼ ì‹œê°„ìˆœìœ¼ë¡œ í‘œì‹œí•˜ì—¬ ì‹œìŠ¤í…œ í™œë™ì„ ëª¨ë‹ˆí„°ë§í•œë‹¤.

## 3. í˜„ì¬ ìƒíƒœ (âœ… ì™„ë£Œ)

### 3.1. ì»´í¬ë„ŒíŠ¸
**Path**: `web/src/widgets/operator/dashboard/recent-events-widget.tsx`

```tsx
interface RecentEventsWidgetProps {
  events: DashboardAgentEvent[] | undefined;
  isLoading: boolean;
}

export function RecentEventsWidget({ events, isLoading }: RecentEventsWidgetProps)
```

### 3.2. UI êµ¬í˜„

```
â”Œâ”€ Recent Events â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“„ Recent Events                                                    â”‚
â”‚     Latest agent activity across all clusters                        â”‚
â”‚                                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ ğŸ¤–  Connected                                           2m ago â”‚  â”‚
â”‚  â”‚     Agent abc123... â€¢ 10.0.1.15                              â†’ â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚ ğŸ¤–  Disconnected                                        5m ago â”‚  â”‚
â”‚  â”‚     Agent def456... â€¢ 10.0.1.16                              â†’ â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚ ğŸ¤–  Registered                                         10m ago â”‚  â”‚
â”‚  â”‚     Agent ghi789...                                          â†’ â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.3. êµ¬í˜„ëœ ê¸°ëŠ¥

| ê¸°ëŠ¥ | ì„¤ëª… |
|------|------|
| ì´ë²¤íŠ¸ íƒ€ì… í‘œì‹œ | `connected`, `disconnected`, `registered`, `revoked`, `blocked` |
| ìƒëŒ€ ì‹œê°„ | "Just now", "5m ago", "1h ago", "2d ago" |
| Agent ID | 8ìë¦¬ ì¶•ì•½ í‘œì‹œ |
| IP ì£¼ì†Œ | ìˆìœ¼ë©´ í‘œì‹œ |
| í´ë¦­ ê°€ëŠ¥ | Agent ìƒì„¸ í˜ì´ì§€ë¡œ ì´ë™ |
| í˜¸ë²„ íš¨ê³¼ | í™”ì‚´í‘œ ì• ë‹ˆë©”ì´ì…˜ í‘œì‹œ |
| ë¹ˆ ìƒíƒœ | "No recent events" ë©”ì‹œì§€ |
| ë¡œë”© ìƒíƒœ | Skeleton UI (5ê°œ í•­ëª©) |

### 3.4. ì´ë²¤íŠ¸ íƒ€ì… ìŠ¤íƒ€ì¼
```typescript
function getEventBadgeVariant(type: string) {
  switch (type) {
    case "connected": return "default";
    case "disconnected": return "destructive";
    case "registered": return "secondary";
    case "revoked":
    case "blocked": return "destructive";
    default: return "outline";
  }
}
```

### 3.5. ì‹œê°„ í¬ë§·
```typescript
function formatTimeAgo(timestamp: string): string {
  if (diffMins < 1) return "Just now";
  if (diffMins < 60) return `${diffMins}m ago`;
  if (diffHours < 24) return `${diffHours}h ago`;
  return `${diffDays}d ago`;
}
```

## 4. EPIC ì„¤ê³„ ëŒ€ë¹„

| í•­ëª© | EPIC ì„¤ê³„ | í˜„ì¬ êµ¬í˜„ | ìƒíƒœ |
|------|----------|----------|------|
| Agent ì´ë²¤íŠ¸ | O | O | âœ… |
| ì‹œê°„ í‘œì‹œ | O | O (ìƒëŒ€ ì‹œê°„) | âœ… |
| í´ë¦­ ë„¤ë¹„ê²Œì´ì…˜ | O | O (Agent ìƒì„¸) | âœ… |
| ë°°í¬ ì´ë²¤íŠ¸ | O | X | ğŸ”² Post-MVP |
| ê²½ê³  ì•„ì´ì½˜ | O | X | ğŸ”² ê°œì„  ê°€ëŠ¥ |

## 5. ê°œì„  ê°€ëŠ¥ ì‚¬í•­ (ì„ íƒì )

### 5.1. ë°°í¬ ì´ë²¤íŠ¸ ì¶”ê°€
ProductPublish ë°°í¬ ì‹œ ì´ë²¤íŠ¸ ì—°ë™:
- `deploy_success`
- `deploy_failed`

### 5.2. ì´ë²¤íŠ¸ íƒ€ì…ë³„ ì•„ì´ì½˜
```tsx
const eventIcons = {
  connected: CheckCircle,
  disconnected: XCircle,
  registered: UserPlus,
  revoked: ShieldOff,
  blocked: Ban,
};
```

### 5.3. í•„í„°ë§ ê¸°ëŠ¥
ì´ë²¤íŠ¸ íƒ€ì…ë³„ í•„í„° (ì—°ê²°ë§Œ ë³´ê¸°, í•´ì œë§Œ ë³´ê¸° ë“±)

## 6. ìˆ˜ìš© ê¸°ì¤€
- [x] ìµœê·¼ 10ê°œ ì´ë²¤íŠ¸ê°€ ì‹œê°„ìˆœìœ¼ë¡œ í‘œì‹œëœë‹¤.
- [x] ì´ë²¤íŠ¸ íƒ€ì…ì´ ì½ê¸° ì‰½ê²Œ í¬ë§·ëœë‹¤.
- [x] ìƒëŒ€ ì‹œê°„ìœ¼ë¡œ í‘œì‹œëœë‹¤.
- [x] í´ë¦­ ì‹œ Agent ìƒì„¸ í˜ì´ì§€ë¡œ ì´ë™í•œë‹¤.
- [x] ì´ë²¤íŠ¸ê°€ ì—†ìœ¼ë©´ ë¹ˆ ìƒíƒœ UIê°€ í‘œì‹œëœë‹¤.
- [x] ë¡œë”© ì¤‘ ìŠ¤ì¼ˆë ˆí†¤ UIê°€ í‘œì‹œëœë‹¤.

## 7. ì°¸ì¡° íŒŒì¼
- `web/src/widgets/operator/dashboard/recent-events-widget.tsx`
- `web/src/entities/dashboard/model/types.ts` (`DashboardAgentEvent`)

## 8. ë¹„ê³ 
- ë°±ì—”ë“œì—ì„œ ìµœê·¼ 10ê°œ ì´ë²¤íŠ¸ë§Œ ë°˜í™˜ (ListRecent)
- ì „ì²´ ì´ë²¤íŠ¸ ë¡œê·¸ëŠ” Agent ìƒì„¸ í˜ì´ì§€ì—ì„œ í™•ì¸ ê°€ëŠ¥
- ë°°í¬ ì´ë²¤íŠ¸ëŠ” ProductPublish ê¸°ëŠ¥ ì™„ë£Œ í›„ ì¶”ê°€ ì˜ˆì •
