# Story 20.5: Route CRUD UI êµ¬í˜„

## ê°œìš”

| í•­ëª© | ë‚´ìš© |
|------|------|
| **Story ID** | 20.5 |
| **Epic** | EPIC-020 (Route & Policy ì„¤ì •) |
| **ìš°ì„ ìˆœìœ„** | P0 |
| **ì˜ˆìƒ ê³µìˆ˜** | 1.5ì¼ |
| **ìƒíƒœ** | ğŸ”² ë¯¸ì‹œì‘ |
| **ë‹´ë‹¹ì** | - |

## ëª©í‘œ

Routeì˜ ìƒì„±, ì¡°íšŒ, ìˆ˜ì •, ì‚­ì œ ê¸°ëŠ¥ì„ ìœ„í•œ ì™„ì „í•œ UIë¥¼ êµ¬í˜„í•œë‹¤. Gateway API HTTPRouteì˜ ëª¨ë“  ë§¤ì¹­ ì¡°ê±´ì„ ì§€ì›í•œë‹¤.

## ì˜ì¡´ì„±

- Story 20.1 (Route ì—”í‹°í‹°)
- Story 20.4 (API Service ìƒì„¸ íƒ­)

## ìš”êµ¬ì‚¬í•­

### ê¸°ëŠ¥ ìš”êµ¬ì‚¬í•­

#### 1. Route ëª©ë¡ (`widgets/provider/service-routes-table/`)

- **í…Œì´ë¸” ì»¬ëŸ¼**
  - Name: Route ì´ë¦„ (í´ë¦­ ì‹œ ìƒì„¸ë¡œ ì´ë™)
  - Path: Path prefix/exact/regex
  - Methods: HTTP ë©”ì„œë“œ íƒœê·¸ë“¤
  - Backend: ì—°ê²°ëœ Backend ì´ë¦„ ë˜ëŠ” "Not connected"
  - Status: Active/Inactive ë°°ì§€
  - Actions: Edit, Delete ë²„íŠ¼

- **ê¸°ëŠ¥**
  - ì •ë ¬: Name, Priority, Created ê¸°ì¤€
  - í•„í„°: Status (All/Active/Inactive)
  - ê²€ìƒ‰: Name, Pathë¡œ ê²€ìƒ‰
  - í˜ì´ì§€ë„¤ì´ì…˜

#### 2. Route ìƒì„± í¼ (`features/route/create-route/`)

**ê¸°ë³¸ ì •ë³´**
- Name (í•„ìˆ˜): ì˜ë¬¸, ìˆ«ì, í•˜ì´í”ˆ
- Priority: ìˆ«ì ì…ë ¥ (ê¸°ë³¸ê°’ 100, ë†’ì„ìˆ˜ë¡ ìš°ì„ )
- Status: Active/Inactive í† ê¸€ (ê¸°ë³¸ê°’ Active)

**Path Matching (íƒ1 í•„ìˆ˜)**
- Path Type: ë¼ë””ì˜¤ ë²„íŠ¼ (Prefix/Exact/Regex)
- Path Prefix: `/api/v1/users` í˜•íƒœ
- Path Exact: `/api/v1/users/me` í˜•íƒœ
- Path Regex: `^/api/v[0-9]+/.*` í˜•íƒœ

**Method Matching (ì„ íƒ)**
- Methods: ì²´í¬ë°•ìŠ¤ ê·¸ë£¹
  - GET, POST, PUT, DELETE, PATCH, HEAD, OPTIONS
  - ë¯¸ì„ íƒ ì‹œ ëª¨ë“  ë©”ì„œë“œ í—ˆìš©

**Header Matching (ì„ íƒ, ë™ì  ëª©ë¡)**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Header Matches                                        [+ Add Header]    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚ â”‚ Name         â”‚ â”‚ Match Type   â”‚ â”‚ Value                  â”‚    [Ã—]   â”‚
â”‚ â”‚ X-API-Versionâ”‚ â”‚ [Exact â–¼]    â”‚ â”‚ v1                     â”‚           â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚ â”‚ X-Request-ID â”‚ â”‚ [Present â–¼]  â”‚ â”‚ (not required)         â”‚    [Ã—]   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```
- Match Type: Exact, RegularExpression, Present
- PresentëŠ” value ì—†ì´ í—¤ë” ì¡´ì¬ ì—¬ë¶€ë§Œ í™•ì¸

**Query Parameter Matching (ì„ íƒ, ë™ì  ëª©ë¡)**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Query Param Matches                                   [+ Add Param]     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚ â”‚ Name         â”‚ â”‚ Match Type   â”‚ â”‚ Value                  â”‚    [Ã—]   â”‚
â”‚ â”‚ version      â”‚ â”‚ [Exact â–¼]    â”‚ â”‚ 2                      â”‚           â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```
- Match Type: Exact, RegularExpression

**Hostname Matching (ì„ íƒ, ë™ì  ëª©ë¡)**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Hostnames                                            [+ Add Hostname]   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚ â”‚ api.example.com                                      [Ã—]   â”‚         â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚ â”‚ *.example.com                                        [Ã—]   â”‚         â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                                                                         â”‚
â”‚ â„¹ï¸ Wildcards (*) are supported for subdomain matching                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Timeout ì„¤ì • (ì„ íƒ, ê³ ê¸‰)**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â–¼ Advanced: Timeouts                                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚ Request Timeout:  [30    ] seconds                                      â”‚
â”‚ â””â”€ Total time for client request-response                               â”‚
â”‚                                                                         â”‚
â”‚ Backend Request Timeout:  [10    ] seconds                              â”‚
â”‚ â””â”€ Time for single backend request (must be â‰¤ request timeout)          â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 3. Route ìˆ˜ì • í¼ (`features/route/update-route/`)
- ìƒì„± í¼ê³¼ ë™ì¼í•œ í•„ë“œ
- ê¸°ì¡´ ê°’ìœ¼ë¡œ ì´ˆê¸°í™”
- Name ë³€ê²½ ì‹œ ì˜í–¥ ë²”ìœ„ ê²½ê³  (ì—°ê²°ëœ Policy)

#### 4. Route ì‚­ì œ ë‹¤ì´ì–¼ë¡œê·¸ (`features/route/delete-route/`)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âš ï¸ Delete Route                                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚ Are you sure you want to delete route "get-users"?                      â”‚
â”‚                                                                         â”‚
â”‚ This route matches:                                                     â”‚
â”‚ â€¢ Path: /api/v1/users (Prefix)                                          â”‚
â”‚ â€¢ Methods: GET                                                          â”‚
â”‚ â€¢ Backend: user-api-backend                                             â”‚
â”‚                                                                         â”‚
â”‚ âš ï¸ 2 policies are attached to this route:                               â”‚
â”‚ â€¢ rate-limit-policy                                                     â”‚
â”‚ â€¢ cors-policy                                                           â”‚
â”‚                                                                         â”‚
â”‚ Deleting this route will also remove these policy attachments.          â”‚
â”‚                                                                         â”‚
â”‚                                    [Cancel] [Delete Route]              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 5. Route ìƒì„¸ í˜ì´ì§€ (`pages/provider/route-detail-page.tsx`)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â† Back to Routes                                                        â”‚
â”‚                                                                         â”‚
â”‚ Route: get-users                                    [Edit] [Delete]     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚ Status: â— Active       Priority: 100       Created: 2024-01-15         â”‚
â”‚                                                                         â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚ â”‚ Matching Rules                                                   â”‚    â”‚
â”‚ â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚    â”‚
â”‚ â”‚ Path:         /api/v1/users                     (Prefix Match)  â”‚    â”‚
â”‚ â”‚ Methods:      GET                                                â”‚    â”‚
â”‚ â”‚ Headers:      X-API-Version: v1                 (Exact)         â”‚    â”‚
â”‚ â”‚ Query Params: (none)                                             â”‚    â”‚
â”‚ â”‚ Hostnames:    api.example.com                                    â”‚    â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                         â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚ â”‚ Backend Target                                                   â”‚    â”‚
â”‚ â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚    â”‚
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                        â”‚    â”‚
â”‚ â”‚ â”‚ user-api-backend      â”‚ Weight: 100%                          â”‚    â”‚
â”‚ â”‚ â”‚ https â€¢ 2 endpoints   â”‚                                        â”‚    â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                        â”‚    â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                         â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚ â”‚ Timeouts                                                         â”‚    â”‚
â”‚ â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚    â”‚
â”‚ â”‚ Request: 30s    Backend Request: 10s                            â”‚    â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                         â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚ â”‚ Applied Policies                                [+ Add Policy]   â”‚    â”‚
â”‚ â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚    â”‚
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                               â”‚    â”‚
â”‚ â”‚ â”‚ âš¡ Rate Limitâ”‚ â”‚ ğŸŒ CORS      â”‚                               â”‚    â”‚
â”‚ â”‚ â”‚ Route scope  â”‚ â”‚ Service scopeâ”‚                               â”‚    â”‚
â”‚ â”‚ â”‚ â— Enabled    â”‚ â”‚ â— Enabled    â”‚                               â”‚    â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                               â”‚    â”‚
â”‚ â”‚                                                                  â”‚    â”‚
â”‚ â”‚ â„¹ï¸ ì¸ì¦ ì •ì±…ì€ Product Publishì—ì„œ ì„¤ì •ë©ë‹ˆë‹¤                    â”‚    â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ë¹„ê¸°ëŠ¥ ìš”êµ¬ì‚¬í•­

- Zod ìŠ¤í‚¤ë§ˆë¡œ ìœ íš¨ì„± ê²€ì¦
- Path Prefix/Exact/Regex ì¤‘ í•˜ë‚˜ëŠ” í•„ìˆ˜
- Header/Query Matchì—ì„œ Regex ìœ íš¨ì„± ê²€ì¦
- í¼ ì œì¶œ ì¤‘ ë¡œë”© ìƒíƒœ í‘œì‹œ
- ì„±ê³µ/ì‹¤íŒ¨ toast ì•Œë¦¼
- ë‚™ê´€ì  ì—…ë°ì´íŠ¸ (ëª©ë¡ ê°±ì‹ )

## ê¸°ìˆ  ìƒì„¸

### Route ë°ì´í„° ëª¨ë¸

```typescript
interface Route {
  id: string;
  api_service_id: string;
  name: string;

  // Matching
  hostnames?: string[];
  path_prefix?: string;
  path_exact?: string;
  path_regex?: string;
  methods?: HTTPMethod[];
  headers?: RouteHeaderMatch[];
  query_params?: RouteQueryMatch[];

  // Routing
  backend_refs: BackendRef[];

  // Metadata
  priority: number;
  status: 'active' | 'inactive';

  // Timeouts
  timeouts?: {
    request?: string;
    backend_request?: string;
  };

  created_at: string;
  updated_at: string;
}

type HTTPMethod = 'GET' | 'POST' | 'PUT' | 'DELETE' | 'PATCH' | 'HEAD' | 'OPTIONS';

interface RouteHeaderMatch {
  name: string;
  type: 'Exact' | 'RegularExpression' | 'Present';
  value?: string;
}

interface RouteQueryMatch {
  name: string;
  type: 'Exact' | 'RegularExpression';
  value: string;
}

interface BackendRef {
  backend_id: string;
  weight?: number;
}
```

### Zod ìŠ¤í‚¤ë§ˆ

```typescript
const routeHeaderMatchSchema = z.object({
  name: z.string().min(1, 'Header name is required'),
  type: z.enum(['Exact', 'RegularExpression', 'Present']),
  value: z.string().optional(),
}).refine(
  (data) => data.type === 'Present' || (data.value && data.value.length > 0),
  { message: 'Value is required for Exact and RegularExpression types' }
);

const routeQueryMatchSchema = z.object({
  name: z.string().min(1, 'Query param name is required'),
  type: z.enum(['Exact', 'RegularExpression']),
  value: z.string().min(1, 'Value is required'),
});

const createRouteSchema = z.object({
  name: z.string()
    .min(1, 'Name is required')
    .regex(/^[a-z0-9-]+$/, 'Only lowercase letters, numbers, and hyphens allowed'),

  // Path matching - at least one required
  path_prefix: z.string().optional(),
  path_exact: z.string().optional(),
  path_regex: z.string().optional(),

  methods: z.array(z.enum(['GET', 'POST', 'PUT', 'DELETE', 'PATCH', 'HEAD', 'OPTIONS'])).optional(),
  headers: z.array(routeHeaderMatchSchema).optional(),
  query_params: z.array(routeQueryMatchSchema).optional(),
  hostnames: z.array(z.string()).optional(),

  backend_refs: z.array(z.object({
    backend_id: z.string(),
    weight: z.number().min(0).max(100).optional(),
  })).optional(),

  priority: z.number().int().default(100),
  status: z.enum(['active', 'inactive']).default('active'),

  timeouts: z.object({
    request: z.string().optional(),
    backend_request: z.string().optional(),
  }).optional(),
}).refine(
  (data) => data.path_prefix || data.path_exact || data.path_regex,
  { message: 'At least one path matching rule is required' }
);
```

### FSD êµ¬ì¡°

```
web/src/
â”œâ”€â”€ entities/route/
â”‚   â”œâ”€â”€ model/types.ts           # Route íƒ€ì… ì •ì˜
â”‚   â”œâ”€â”€ api/route-api.ts         # API í›…
â”‚   â””â”€â”€ ui/
â”‚       â”œâ”€â”€ route-status-badge.tsx
â”‚       â”œâ”€â”€ route-method-tags.tsx
â”‚       â”œâ”€â”€ route-path-display.tsx
â”‚       â””â”€â”€ route-matching-summary.tsx
â”‚
â”œâ”€â”€ features/route/
â”‚   â”œâ”€â”€ create-route/
â”‚   â”‚   â”œâ”€â”€ model/schema.ts      # Zod ìŠ¤í‚¤ë§ˆ
â”‚   â”‚   â”œâ”€â”€ ui/
â”‚   â”‚   â”‚   â”œâ”€â”€ create-route-form.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ path-matching-fields.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ method-checkboxes.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ header-matches-editor.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ query-matches-editor.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ hostnames-editor.tsx
â”‚   â”‚   â”‚   â””â”€â”€ timeout-settings.tsx
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”œâ”€â”€ update-route/
â”‚   â”‚   â”œâ”€â”€ ui/
â”‚   â”‚   â”‚   â””â”€â”€ update-route-form.tsx
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”œâ”€â”€ delete-route/
â”‚   â”‚   â”œâ”€â”€ ui/
â”‚   â”‚   â”‚   â””â”€â”€ delete-route-dialog.tsx
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â””â”€â”€ index.ts
â”‚
â”œâ”€â”€ widgets/provider/
â”‚   â””â”€â”€ service-routes-table/
â”‚       â”œâ”€â”€ ui/
â”‚       â”‚   â”œâ”€â”€ routes-table.tsx
â”‚       â”‚   â”œâ”€â”€ routes-table-row.tsx
â”‚       â”‚   â””â”€â”€ routes-table-filters.tsx
â”‚       â””â”€â”€ index.ts
â”‚
â””â”€â”€ pages/provider/
    â”œâ”€â”€ route-detail-page.tsx
    â””â”€â”€ routes-page.tsx          # Standalone (ì„ íƒ)
```

### App Router

```
web/app/provider/services/[id]/routes/
â”œâ”€â”€ new/page.tsx              -> Route ìƒì„± í˜ì´ì§€
â””â”€â”€ [routeId]/
    â”œâ”€â”€ page.tsx              -> Route ìƒì„¸ í˜ì´ì§€
    â””â”€â”€ edit/page.tsx         -> Route ìˆ˜ì • í˜ì´ì§€
```

## ìˆ˜ìš© ê¸°ì¤€

### Route ëª©ë¡
- [ ] Route ëª©ë¡ì´ í…Œì´ë¸”ë¡œ í‘œì‹œëœë‹¤
- [ ] Name, Path, Methods, Backend, Status ì»¬ëŸ¼ì´ í‘œì‹œëœë‹¤
- [ ] Statusë¡œ í•„í„°ë§í•  ìˆ˜ ìˆë‹¤
- [ ] Name/Pathë¡œ ê²€ìƒ‰í•  ìˆ˜ ìˆë‹¤
- [ ] ì •ë ¬ì´ ë™ì‘í•œë‹¤

### Route ìƒì„±
- [ ] Route ìƒì„± í¼ì´ ë™ì‘í•œë‹¤
- [ ] Path Type (Prefix/Exact/Regex) ì„ íƒì´ ë™ì‘í•œë‹¤
- [ ] Methods ì²´í¬ë°•ìŠ¤ê°€ ë³µìˆ˜ ì„ íƒ ê°€ëŠ¥í•˜ë‹¤
- [ ] Header Matchë¥¼ ë™ì ìœ¼ë¡œ ì¶”ê°€/ì‚­ì œí•  ìˆ˜ ìˆë‹¤
- [ ] Query Param Matchë¥¼ ë™ì ìœ¼ë¡œ ì¶”ê°€/ì‚­ì œí•  ìˆ˜ ìˆë‹¤
- [ ] Hostnamesë¥¼ ë™ì ìœ¼ë¡œ ì¶”ê°€/ì‚­ì œí•  ìˆ˜ ìˆë‹¤
- [ ] Timeout ì„¤ì •ì´ ë™ì‘í•œë‹¤
- [ ] ìœ íš¨ì„± ê²€ì¦ì´ ë™ì‘í•œë‹¤

### Route ìˆ˜ì •
- [ ] Route ìˆ˜ì • í¼ì´ ê¸°ì¡´ ê°’ìœ¼ë¡œ ì´ˆê¸°í™”ëœë‹¤
- [ ] ëª¨ë“  í•„ë“œ ìˆ˜ì •ì´ ê°€ëŠ¥í•˜ë‹¤

### Route ì‚­ì œ
- [ ] ì‚­ì œ í™•ì¸ ë‹¤ì´ì–¼ë¡œê·¸ê°€ í‘œì‹œëœë‹¤
- [ ] ì—°ê²°ëœ Policy ê²½ê³ ê°€ í‘œì‹œëœë‹¤

### Route ìƒì„¸
- [ ] Route ìƒì„¸ í˜ì´ì§€ê°€ ë™ì‘í•œë‹¤
- [ ] Matching Rulesê°€ í‘œì‹œëœë‹¤
- [ ] Backend Targetì´ í‘œì‹œëœë‹¤
- [ ] Applied Policiesê°€ í‘œì‹œëœë‹¤

## ì°¸ì¡°

- Gateway API HTTPRoute: https://gateway-api.sigs.k8s.io/reference/spec/#gateway.networking.k8s.io/v1.HTTPRoute
- íŒ¨í„´ ì°¸ì¡°: `web/src/features/service/create-service/`
- ë™ì  ëª©ë¡: `web/src/features/gateway/create/` (Listeners)
- ì²´í¬ë°•ìŠ¤ ê·¸ë£¹: shadcn/ui Checkbox
