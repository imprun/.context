# STORY-14.2: Agent Registration Dialog

## 1. ê°œìš”
**Epic**: EPIC-014 Agent ê´€ë¦¬
**ì œëª©**: Agent ë“±ë¡ ë‹¤ì´ì–¼ë¡œê·¸ (í† í° ë°œê¸‰)
**ë‹´ë‹¹ì**: AI Agent
**ìƒíƒœ**: ğŸ”„ ë¦¬íŒ©í† ë§ í•„ìš”

## 2. ëª©ì 
Cluster ìƒì„¸ í˜ì´ì§€ì—ì„œ Agentë¥¼ ë“±ë¡í•˜ê³  Bootstrap Tokenì„ ë°œê¸‰ë°›ëŠ” ë‹¤ì´ì–¼ë¡œê·¸ë¥¼ êµ¬í˜„í•œë‹¤.

## 3. í˜„ì¬ ìƒíƒœ vs EPIC ì„¤ê³„

### í˜„ì¬ êµ¬í˜„
- **ìœ„ì¹˜**: ë…ë¦½ í˜ì´ì§€ (`/operator/agents/new`)
- **ì»´í¬ë„ŒíŠ¸**: `RegisterAgentForm` (í˜ì´ì§€ í¼ í˜•íƒœ)
- **íŒŒì¼**: `web/src/features/agent/register-agent/register-agent-form.tsx`

### EPIC ì„¤ê³„ (ëª©í‘œ)
- **ìœ„ì¹˜**: Cluster ìƒì„¸ í˜ì´ì§€ ë‚´ ë‹¤ì´ì–¼ë¡œê·¸
- **ì»´í¬ë„ŒíŠ¸**: `RegisterAgentDialog` (ëª¨ë‹¬ í˜•íƒœ)
- **UX**: Cluster ìƒì„¸ â†’ "Agent ë“±ë¡" ë²„íŠ¼ â†’ ë‹¤ì´ì–¼ë¡œê·¸

## 4. ë¦¬íŒ©í† ë§ ì‘ì—…

### 4.1. ì‹ ê·œ ì»´í¬ë„ŒíŠ¸ ìƒì„±
**Path**: `web/src/features/agent/register-agent/register-agent-dialog.tsx`

```tsx
interface RegisterAgentDialogProps {
  clusterId: string;
  clusterName: string;
  open: boolean;
  onOpenChange: (open: boolean) => void;
  onSuccess?: (token: string) => void;
}

export function RegisterAgentDialog({
  clusterId,
  clusterName,
  open,
  onOpenChange,
  onSuccess,
}: RegisterAgentDialogProps) {
  // Dialog with form inside
  // On success, call onSuccess with install_token
}
```

### 4.2. UI ë ˆì´ì•„ì›ƒ
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Agent ë“±ë¡                                                          [X]   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  í´ëŸ¬ìŠ¤í„°: {clusterName}                                                    â”‚
â”‚                                                                             â”‚
â”‚  Agent ì´ë¦„ *                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ agent-prod-01                                                        â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  â“˜ í´ëŸ¬ìŠ¤í„° ë‚´ì—ì„œ ê³ ìœ í•œ ì´ë¦„ì´ì–´ì•¼ í•©ë‹ˆë‹¤                                â”‚
â”‚                                                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                   [ ì·¨ì†Œ ]  [ ë“±ë¡ ]       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.3. ê¸°ì¡´ ì½”ë“œ í™œìš©
`RegisterAgentForm`ì˜ í¼ ë¡œì§ì„ ì¬ì‚¬ìš©í•˜ë˜, Dialog wrapperë¡œ ê°ì‹¸ê¸°:
- `useForm` + zodResolver
- `useRegisterAgent` mutation
- Form validation

## 5. ìˆ˜ìš© ê¸°ì¤€
- [ ] Cluster ìƒì„¸ í˜ì´ì§€ì—ì„œ "Agent ë“±ë¡" ë²„íŠ¼ í´ë¦­ ì‹œ ë‹¤ì´ì–¼ë¡œê·¸ê°€ ì—´ë¦°ë‹¤.
- [ ] ë‹¤ì´ì–¼ë¡œê·¸ì— í˜„ì¬ í´ëŸ¬ìŠ¤í„° ì´ë¦„ì´ í‘œì‹œëœë‹¤.
- [ ] Agent ì´ë¦„ ì…ë ¥ í›„ ë“±ë¡ ì‹œ API í˜¸ì¶œëœë‹¤.
- [ ] ë“±ë¡ ì„±ê³µ ì‹œ í† í° í‘œì‹œ ëª¨ë‹¬(STORY-14.3)ì´ ì—´ë¦°ë‹¤.
- [ ] ì—ëŸ¬ ì‹œ í† ìŠ¤íŠ¸ ë©”ì‹œì§€ê°€ í‘œì‹œëœë‹¤.

## 6. ê¸°ìˆ  ìŠ¤íƒ
- `@shadcn/dialog`: ë‹¤ì´ì–¼ë¡œê·¸ ì»´í¬ë„ŒíŠ¸
- `react-hook-form` + `zod`: í¼ ìœ íš¨ì„± ê²€ì‚¬
- `@tanstack/react-query`: API í†µì‹ 

## 7. ì°¸ì¡° íŒŒì¼
- `web/src/features/agent/register-agent/register-agent-form.tsx` (ê¸°ì¡´ ì°¸ì¡°)
- `web/src/features/agent/revoke-agent/revoke-agent-dialog.tsx` (ë‹¤ì´ì–¼ë¡œê·¸ íŒ¨í„´ ì°¸ì¡°)

## 8. ë¹„ê³ 
- ê¸°ì¡´ `/operator/agents/new` í˜ì´ì§€ ë¼ìš°íŠ¸ëŠ” deprecate ì˜ˆì •
- `RegisterAgentForm`ì€ ë‹¤ì´ì–¼ë¡œê·¸ ë²„ì „ ì™„ë£Œ í›„ ì œê±° ê°€ëŠ¥
