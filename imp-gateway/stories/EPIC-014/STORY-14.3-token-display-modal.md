# STORY-14.3: Token Display Modal with Install Scripts

## 1. ê°œìš”
**Epic**: EPIC-014 Agent ê´€ë¦¬
**ì œëª©**: í† í° í‘œì‹œ ëª¨ë‹¬ (ì„¤ì¹˜ ìŠ¤í¬ë¦½íŠ¸ í¬í•¨)
**ë‹´ë‹¹ì**: AI Agent
**ìƒíƒœ**: ğŸ”„ ê°œì„  í•„ìš”

## 2. ëª©ì 
Agent ë“±ë¡ í›„ ë°œê¸‰ëœ Bootstrap Tokenì„ í‘œì‹œí•˜ê³ , ë‹¤ì–‘í•œ í™˜ê²½(Kubernetes, Docker, Native)ì— ë§ëŠ” ì„¤ì¹˜ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì œê³µí•œë‹¤.

## 3. í˜„ì¬ ìƒíƒœ vs EPIC ì„¤ê³„

### í˜„ì¬ êµ¬í˜„
- í† í° í‘œì‹œ: O (RegisterAgentForm ë‚´ë¶€ì— ì¸ë¼ì¸ìœ¼ë¡œ êµ¬í˜„)
- í´ë¦½ë³´ë“œ ë³µì‚¬: O
- ì„¤ì¹˜ ìŠ¤í¬ë¦½íŠ¸: X (ì—†ìŒ)
- íƒ­ UI: X (ì—†ìŒ)

### EPIC ì„¤ê³„ (ëª©í‘œ)
- ë³„ë„ ëª¨ë‹¬ ì»´í¬ë„ŒíŠ¸ë¡œ ë¶„ë¦¬
- ì„¤ì¹˜ ë°©ë²• ì„ íƒ íƒ­ (Kubernetes / Docker / Native)
- ê° í™˜ê²½ë³„ ì„¤ì¹˜ ìŠ¤í¬ë¦½íŠ¸ with í† í° ìë™ ì‚½ì…
- ê° ìŠ¤í¬ë¦½íŠ¸ ê°œë³„ ë³µì‚¬ ê¸°ëŠ¥

## 4. êµ¬í˜„ ìƒì„¸

### 4.1. ì»´í¬ë„ŒíŠ¸ êµ¬ì¡°
**Path**: `web/src/features/agent/register-agent/token-display-modal.tsx`

```tsx
interface TokenDisplayModalProps {
  token: string;
  serverUrl: string;
  open: boolean;
  onOpenChange: (open: boolean) => void;
  onComplete?: () => void;
}

type InstallMethod = 'kubernetes' | 'docker' | 'native';

export function TokenDisplayModal({
  token,
  serverUrl,
  open,
  onOpenChange,
  onComplete,
}: TokenDisplayModalProps) {
  const [method, setMethod] = useState<InstallMethod>('kubernetes');
  // ...
}
```

### 4.2. UI ë ˆì´ì•„ì›ƒ
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ”‘ Agent í† í° ë°œê¸‰ ì™„ë£Œ                                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  âš ï¸  ì´ í† í°ì€ ë‹¤ì‹œ ë³¼ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ì§€ê¸ˆ ë³µì‚¬í•´ì£¼ì„¸ìš”!                       â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...                       [ë³µì‚¬] â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•   â”‚
â”‚                                                                             â”‚
â”‚  ì„¤ì¹˜ ë°©ë²• ì„ íƒ:                                                            â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                           â”‚
â”‚  â”‚â–£ Kubernetes â”‚ â”‚   Docker    â”‚ â”‚   Native    â”‚                           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                           â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ # Helmìœ¼ë¡œ ì„¤ì¹˜                                               [ë³µì‚¬] â”‚   â”‚
â”‚  â”‚ helm repo add impgateway https://charts.impgateway.io               â”‚   â”‚
â”‚  â”‚ ...                                                                  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              [ ì™„ë£Œ ]       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.3. ì„¤ì¹˜ ìŠ¤í¬ë¦½íŠ¸ í…œí”Œë¦¿

#### Kubernetes (Helm)
```bash
# Helmìœ¼ë¡œ ì„¤ì¹˜
helm repo add impgateway https://charts.impgateway.io
helm repo update

helm install imp-agent impgateway/agent \
  --namespace impgateway-system \
  --create-namespace \
  --set agent.token="${TOKEN}" \
  --set agent.serverUrl="${SERVER_URL}"
```

#### Docker
```bash
# Dockerë¡œ ì‹¤í–‰
docker run -d \
  --name imp-agent \
  --restart unless-stopped \
  -e AGENT_TOKEN="${TOKEN}" \
  -e SERVER_URL="${SERVER_URL}" \
  impgateway/agent:latest
```

#### Native (Binary)
```bash
# ë°”ì´ë„ˆë¦¬ ë‹¤ìš´ë¡œë“œ
curl -sSL https://get.impgateway.io/agent | sh

# í™˜ê²½ë³€ìˆ˜ ì„¤ì • í›„ ì‹¤í–‰
export AGENT_TOKEN="${TOKEN}"
export SERVER_URL="${SERVER_URL}"

# ì„œë¹„ìŠ¤ë¡œ ì‹¤í–‰
sudo systemctl enable imp-agent
sudo systemctl start imp-agent
```

### 4.4. í† í°/ìŠ¤í¬ë¦½íŠ¸ ìƒì„± ìœ í‹¸ë¦¬í‹°
**Path**: `web/src/features/agent/register-agent/install-scripts.ts`

```typescript
export function generateInstallScript(
  method: InstallMethod,
  token: string,
  serverUrl: string
): string {
  switch (method) {
    case 'kubernetes':
      return generateK8sScript(token, serverUrl);
    case 'docker':
      return generateDockerScript(token, serverUrl);
    case 'native':
      return generateNativeScript(token, serverUrl);
  }
}
```

## 5. ìˆ˜ìš© ê¸°ì¤€
- [ ] ëª¨ë‹¬ì— í† í°ì´ í‘œì‹œë˜ê³  ë³µì‚¬ ê¸°ëŠ¥ì´ ë™ì‘í•œë‹¤.
- [ ] "âš ï¸ ì´ í† í°ì€ ë‹¤ì‹œ ë³¼ ìˆ˜ ì—†ìŠµë‹ˆë‹¤" ê²½ê³  ë©”ì‹œì§€ê°€ í‘œì‹œëœë‹¤.
- [ ] Kubernetes / Docker / Native íƒ­ ì „í™˜ì´ ê°€ëŠ¥í•˜ë‹¤.
- [ ] ê° í™˜ê²½ë³„ ì„¤ì¹˜ ìŠ¤í¬ë¦½íŠ¸ê°€ ì˜¬ë°”ë¥´ê²Œ í‘œì‹œëœë‹¤.
- [ ] ìŠ¤í¬ë¦½íŠ¸ì— í† í°ê³¼ ì„œë²„ URLì´ ìë™ ì‚½ì…ëœë‹¤.
- [ ] ìŠ¤í¬ë¦½íŠ¸ ë³µì‚¬ ë²„íŠ¼ì´ ë™ì‘í•œë‹¤.
- [ ] "ì™„ë£Œ" í´ë¦­ ì‹œ ëª¨ë‹¬ì´ ë‹«íŒë‹¤.

## 6. ê¸°ìˆ  ìŠ¤íƒ
- `@shadcn/dialog`: ëª¨ë‹¬ ì»´í¬ë„ŒíŠ¸
- `@shadcn/tabs`: ì„¤ì¹˜ ë°©ë²• íƒ­
- `navigator.clipboard`: í´ë¦½ë³´ë“œ API
- `sonner`: ë³µì‚¬ ì„±ê³µ í† ìŠ¤íŠ¸

## 7. í™˜ê²½ ë³€ìˆ˜
- `NEXT_PUBLIC_API_URL`: ì„œë²„ URL (ìŠ¤í¬ë¦½íŠ¸ì— ì‚½ì…)

## 8. ì°¸ì¡° íŒŒì¼
- `web/src/features/agent/register-agent/register-agent-form.tsx` (ê¸°ì¡´ í† í° í‘œì‹œ ë¡œì§)
- EPIC-014 UI/UX ê°€ì´ë“œ - í† í° í‘œì‹œ ëª¨ë‹¬ ì„¹ì…˜
