# STORY-17.5: Product ìƒíƒœ ê´€ë¦¬ ê¸°ëŠ¥

## 1. ê°œìš”
**Epic**: EPIC-017 Product ê´€ë¦¬
**ì œëª©**: Product ìƒíƒœ ê´€ë¦¬ ê¸°ëŠ¥
**ë‹´ë‹¹ì**: AI Agent
**ìƒíƒœ**: ğŸ”² ë¯¸ì‹œì‘

## 2. ëª©ì 
Productì˜ ë¼ì´í”„ì‚¬ì´í´ ìƒíƒœ(draft/active/archived)ë¥¼ ë³€ê²½í•˜ëŠ” ê¸°ëŠ¥ì„ êµ¬í˜„í•œë‹¤.

## 3. Product ë¼ì´í”„ì‚¬ì´í´

```mermaid
stateDiagram-v2
    [*] --> Draft: ìƒì„±

    Draft --> Active: í™œì„±í™”
    note right of Draft
        ì¡°ê±´: Service 1ê°œ ì´ìƒ ì—°ê²°
    end note

    Active --> Draft: ë¹„í™œì„±í™”
    note right of Active
        ì¡°ê±´: ë°°í¬ëœ í™˜ê²½ ì—†ìŒ
    end note

    Active --> Archived: íê¸°

    Archived --> [*]
    note right of Archived
        ìµœì¢… ìƒíƒœ
        ë³€ê²½ ë¶ˆê°€
    end note
```

### ìƒíƒœ ì „í™˜ íë¦„

```mermaid
flowchart LR
    D[Draft] -->|í™œì„±í™”<br/>Service â‰¥ 1| A[Active]
    A -->|ë¹„í™œì„±í™”<br/>ë°°í¬ ì—†ìŒ| D
    A -->|íê¸°| AR[Archived]

    style D fill:#FFFACD
    style A fill:#90EE90
    style AR fill:#D3D3D3
```

### ìƒíƒœë³„ í—ˆìš© ë™ì‘
| í˜„ì¬ ìƒíƒœ | ê°€ëŠ¥í•œ ì „í™˜ | ì¡°ê±´ |
|----------|------------|------|
| Draft | â†’ Active | API Serviceê°€ 1ê°œ ì´ìƒ ì—°ê²° |
| Active | â†’ Draft | ë°°í¬ëœ í™˜ê²½ ì—†ìŒ (EPIC-019 ì—°ë™) |
| Active | â†’ Archived | - |
| Archived | (ì—†ìŒ) | ìµœì¢… ìƒíƒœ, ë³€ê²½ ë¶ˆê°€ |

## 4. êµ¬í˜„ ìƒì„¸

### 4.1. ë””ë ‰í† ë¦¬ êµ¬ì¡°

```mermaid
flowchart TB
    subgraph Features["features/product/"]
        CS["change-status/ â† ì‹ ê·œ"]
        LS[link-services/]
        CP[create-product/]
        UP[update-product/]
        DP[delete-product/]
    end

    subgraph ChangeStatus["change-status/"]
        CSI[index.ts]
        CSU["ui/"]
        AD[activate-dialog.tsx]
        DD[deactivate-dialog.tsx]
        ARD[archive-dialog.tsx]
    end

    CS --> CSI
    CS --> CSU
    CSU --> AD
    CSU --> DD
    CSU --> ARD

    style CS fill:#90EE90
    style AD fill:#90EE90
    style DD fill:#90EE90
    style ARD fill:#90EE90
```

### 4.2. ìƒíƒœë³„ ë²„íŠ¼ í‘œì‹œ

```mermaid
flowchart TB
    subgraph Draft["Draft ìƒíƒœ"]
        D1[ProductStatusBadge: Draft]
        D2["[Activate]"]
        D3["[Edit]"]
        D4["[Delete]"]
    end

    subgraph Active["Active ìƒíƒœ"]
        A1[ProductStatusBadge: Active]
        A2["[Deactivate]"]
        A3["[Archive]"]
        A4["[Edit]"]
    end

    subgraph Archived["Archived ìƒíƒœ"]
        AR1[ProductStatusBadge: Archived]
        AR2["(ì½ê¸° ì „ìš©)"]
    end

    style D1 fill:#FFFACD
    style A1 fill:#90EE90
    style AR1 fill:#D3D3D3
```

### 4.3. UI - ìƒíƒœë³„ í—¤ë” ë²„íŠ¼
```
Draft ìƒíƒœ:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â† Payment API v2.0    [Draft]  [Activate] [Edit]   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Active ìƒíƒœ:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â† Payment API v2.0    [Active] [Deactivate] [Edit] â”‚
â”‚                                [Archive]           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Archived ìƒíƒœ:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â† Payment API v2.0    [Archived] (ì½ê¸° ì „ìš©)       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.4. í™œì„±í™” í™•ì¸ ë‹¤ì´ì–¼ë¡œê·¸
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Activate Product                             [Ã—]   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ "Payment API v2.0"ì„ í™œì„±í™”í•˜ì‹œê² ìŠµë‹ˆê¹Œ?           â”‚
â”‚                                                     â”‚
â”‚ í™œì„±í™”í•˜ë©´:                                         â”‚
â”‚ â€¢ Consumerì—ê²Œ ë…¸ì¶œë©ë‹ˆë‹¤                           â”‚
â”‚ â€¢ ë°°í¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤                                â”‚
â”‚                                                     â”‚
â”‚ ì—°ê²°ëœ API Services: 3ê°œ                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                        [Cancel]  [Activate]         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.5. ê²€ì¦ íë¦„

```mermaid
flowchart TB
    subgraph Activate["í™œì„±í™” ê²€ì¦"]
        A1[Activate ë²„íŠ¼ í´ë¦­]
        A2{Service ì—°ê²°ë¨?}
        A3[í™•ì¸ ë‹¤ì´ì–¼ë¡œê·¸]
        A4[ì—ëŸ¬ í† ìŠ¤íŠ¸]
        A5[ìƒíƒœ ë³€ê²½ API í˜¸ì¶œ]

        A1 --> A2
        A2 -->|Yes| A3
        A2 -->|No| A4
        A3 -->|í™•ì¸| A5
    end

    subgraph Archive["íê¸° ê²€ì¦"]
        AR1[Archive ë²„íŠ¼ í´ë¦­]
        AR2[ê²½ê³  ë‹¤ì´ì–¼ë¡œê·¸<br/>ë˜ëŒë¦´ ìˆ˜ ì—†ìŒ]
        AR3{ì‚¬ìš©ì í™•ì¸?}
        AR4[ìƒíƒœ ë³€ê²½ API í˜¸ì¶œ]

        AR1 --> AR2
        AR2 --> AR3
        AR3 -->|Yes| AR4
    end

    style A4 fill:#FFB6C1
    style AR2 fill:#FFB6C1
```

### 4.6. ê²€ì¦ ë¡œì§
```typescript
// Activate ê²€ì¦: Serviceê°€ 1ê°œ ì´ìƒ ì—°ê²°ë˜ì–´ì•¼ í•¨
if (!product.api_services?.length) {
  toast.error("ìµœì†Œ 1ê°œì˜ API Serviceë¥¼ ì—°ê²°í•´ì£¼ì„¸ìš”.");
  return;
}

// Archive ê²½ê³ : ë˜ëŒë¦´ ìˆ˜ ì—†ìŒ
const confirmed = await confirm({
  title: "Archive Product",
  description: "ì´ ì‘ì—…ì€ ë˜ëŒë¦´ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.",
  variant: "destructive",
});
```

## 5. ìˆ˜ìš© ê¸°ì¤€
- [ ] ìƒíƒœì— ë”°ë¥¸ ì•¡ì…˜ ë²„íŠ¼ í‘œì‹œ
  - Draft: "Activate" ë²„íŠ¼
  - Active: "Deactivate", "Archive" ë²„íŠ¼
  - Archived: ì•¡ì…˜ ë²„íŠ¼ ì—†ìŒ
- [ ] Draft â†’ Active: Service ì—°ê²° í™•ì¸
- [ ] Active â†’ Draft: (í–¥í›„) ë°°í¬ í˜„í™© í™•ì¸
- [ ] ìƒíƒœ ë³€ê²½ í™•ì¸ ë‹¤ì´ì–¼ë¡œê·¸
- [ ] ì„±ê³µ/ì‹¤íŒ¨ í† ìŠ¤íŠ¸
- [ ] ìƒíƒœ ë³€ê²½ ì¤‘ ë¡œë”© í‘œì‹œ
- [ ] ë²„íŠ¼ disabled ìƒíƒœ ì²˜ë¦¬

## 6. ì°¸ì¡° íŒŒì¼
- `web/src/features/cluster/` - Feature êµ¬ì¡° íŒ¨í„´
- `@/shared/components/ui/alert-dialog` - í™•ì¸ ë‹¤ì´ì–¼ë¡œê·¸

## 7. ë¹„ê³ 
- Deactivate ì‹œ ë°°í¬ í˜„í™© í™•ì¸ì€ EPIC-019 ì™„ë£Œ í›„ ì—°ë™
